<?xml version="1.0" encoding="UTF-8"?>
<simulationConfig>
  
  <likelihood>
    <type>gaussianRegression</type>
    <emulatorRebuildCount>1000</emulatorRebuildCount>
    <polynomialOrder>2</polynomialOrder>
    <sigmaBuffer>3.0</sigmaBuffer>
    <logLikelihoodBuffer>10.0</logLikelihoodBuffer>
    <logLikelihoodErrorTolerance>0.01</logLikelihoodErrorTolerance>
    <reportCount>100</reportCount>
    <emulateOutliers>true</emulateOutliers>
    <simulatorLikelihood>
      <type>massFunction</type>
      <haloMassMinimum>1.0e9</haloMassMinimum>
      <haloMassMaximum>1.0e15</haloMassMaximum>
      <redshiftMinimum>0.0</redshiftMinimum>
      <redshiftMaximum>0.5</redshiftMaximum>
      <useSurveyLimits>true</useSurveyLimits>
      <massFunctionFileName>covarianceMatrix.hdf5</massFunctionFileName>
    </simulatorLikelihood>
  </likelihood>
  
  <convergence>
    <type>GelmanRubin</type>
    <Rhat>1.2</Rhat>
    <burnCount>10</burnCount>
    <testCount>20</testCount>
    <outlierCountMaximum>4</outlierCountMaximum>
    <outlierSignificance>0.95</outlierSignificance>
    <outlierLogLikelihoodOffset>60</outlierLogLikelihoodOffset>
    <reportCount>1</reportCount>
    <emulateOutliers>true</emulateOutliers>
    <logFile>/dev/null</logFile>
  </convergence>
  
  <state>
    <type>history</type>
    <acceptedStateCount>100</acceptedStateCount>
  </state>
  
  <stateInitializor>
    <type>latinHypercube</type>
    <maximinTrialCount>100</maximinTrialCount>
  </stateInitializor>
  
  <proposalSize>
    <type>adaptive</type>
    <gammaInitial>0.5</gammaInitial>
    <gammaFactor>1.03</gammaFactor>
    <gammaMinimum>0.0001</gammaMinimum>
    <gammaMaximum>10.0</gammaMaximum>
    <acceptanceRateMinimum>0.4</acceptanceRateMinimum>
    <acceptanceRateMaximum>0.6</acceptanceRateMaximum>
    <updateCount>20</updateCount>
  </proposalSize>
  
  <proposalSizeTemperatureExponent>
    <type>adaptive</type>
    <exponentInitial>0.5</exponentInitial>
    <exponentFactor>0.05</exponentFactor>
    <exponentMinimum>0.1</exponentMinimum>
    <exponentMaximum>1.0</exponentMaximum>
    <gradientMinimum>-0.2</gradientMinimum>
    <gradientMaximum>0.2</gradientMaximum>
    <updateCount>10</updateCount>
  </proposalSizeTemperatureExponent>
  
  <randomJump>
    <type>adaptive</type>
  </randomJump>
  
  <simulation>
    <type>differentialEvolution</type>
    <stepsMaximum>1000000</stepsMaximum>
    <stepsPostConvergence>10000</stepsPostConvergence>
    <acceptanceAverageCount>100</acceptanceAverageCount>
    <stateSwapCount>10</stateSwapCount>
    <logFileRoot>./chains</logFileRoot>
    <sampleOutliers>false</sampleOutliers>
  </simulation>

  <parameters>
    <parameter>
      <name>alphaSatellite</name>
      <prior> <!-- Prior from Kravtsov et al. (2004) -->
	<distribution>
	  <type>normal</type>
	  <mean>0.98</mean>
	  <variance>0.000755</variance>
	</distribution>
      </prior>
      <mapping>
	<type>linear</type>
      </mapping>
      <random>
	<type>Cauchy</type>
	<median>0.0</median>
	<scale>0.001</scale>
      </random>
    </parameter>
    <parameter>
      <name>log10M1</name>
      <prior>
	<distribution>
	  <type>uniform</type>
	  <minimum>12.1</minimum>
	  <maximum>12.6</maximum>
	</distribution>
      </prior>
      <mapping>
	<type>linear</type>
      </mapping>
      <random>
	<type>Cauchy</type>
	<median>0.0</median>
	<scale>0.001</scale>
      </random>
    </parameter>
    <parameter>
      <name>log10Mstar0</name>
      <prior>
	<distribution>
	  <type>uniform</type>
	  <minimum>10.5</minimum>
	  <maximum>10.8</maximum>
	</distribution>
      </prior>
      <mapping>
	<type>linear</type>
      </mapping>
      <random>
	<type>Cauchy</type>
	<median>0.0</median>
	<scale>0.001</scale>
      </random>
    </parameter> 
    <parameter>
      <name>beta</name>
      <prior>
	<distribution>
	  <type>uniform</type>
	  <minimum>0.35</minimum>
	  <maximum>0.50</maximum>
	</distribution>
      </prior>
      <mapping>
	<type>linear</type>
      </mapping>
      <random>
	<type>Cauchy</type>
	<median>0.0</median>
	<scale>0.001</scale>
      </random>
    </parameter>
    <parameter>
      <name>delta</name>
      <prior>
	<distribution>
	  <type>uniform</type>
	  <minimum>0.40</minimum>
	  <maximum>0.65</maximum>
	</distribution>
      </prior>
      <mapping>
	<type>linear</type>
      </mapping>
      <random>
	<type>Cauchy</type>
	<median>0.0</median>
	<scale>0.001</scale>
      </random>
    </parameter> 
    <parameter>
      <name>gamma</name>
      <prior>
	<distribution>
	  <type>uniform</type>
	  <minimum>0.7</minimum>
	  <maximum>1.9</maximum>
	</distribution>
      </prior>
      <mapping>
	<type>linear</type>
      </mapping>
      <random>
	<type>Cauchy</type>
	<median>0.0</median>
	<scale>0.001</scale>
      </random>
    </parameter> 
    <parameter>
      <name>sigmaLogMstar</name>
      <prior>
	<distribution>
	  <type>uniform</type>
	  <minimum>0.10</minimum>
	  <maximum>0.42</maximum>
	</distribution>
      </prior>
      <mapping>
	<type>logarithmic</type>
      </mapping>
      <random>
	<type>Cauchy</type>
	<median>0.0</median>
	<scale>0.001</scale>
      </random>
    </parameter>
    <parameter>
      <name>BCut</name>
      <prior>
	<distribution>
	  <type>uniform</type>
	  <minimum>1.0</minimum>
	  <maximum>128.0</maximum>
	</distribution>
      </prior>
      <mapping>
	<type>linear</type>
      </mapping>
      <random>
	<type>Cauchy</type>
	<median>0.0</median>
	<scale>0.001</scale>
      </random>
    </parameter>
    <parameter>
      <name>BSatellite</name>
      <prior>
	<distribution>
	  <type>uniform</type>
	  <minimum>1.0</minimum>
	  <maximum>20.0</maximum>
	</distribution>
      </prior>
      <mapping>
	<type>linear</type>
      </mapping>
      <random>
	<type>Cauchy</type>
	<median>0.0</median>
	<scale>0.001</scale>
      </random>
    </parameter>
    <parameter>
      <name>betaCut</name>
      <prior>
	<distribution>
	  <type>uniform</type>
	  <minimum>-2.0</minimum>
	  <maximum>+0.0</maximum>
	</distribution>
      </prior>
      <mapping>
	<type>linear</type>
      </mapping>
      <random>
	<type>Cauchy</type>
	<median>0.0</median>
	<scale>0.001</scale>
      </random>
    </parameter>   
    <parameter>
      <name>betaSatellite</name>
      <prior>
	<distribution>
	  <type>uniform</type>
	  <minimum>1.0</minimum>
	  <maximum>2.0</maximum>
	</distribution>
      </prior>
      <mapping>
	<type>linear</type>
      </mapping>
      <random>
	<type>Cauchy</type>
	<median>0.0</median>
	<scale>0.001</scale>
      </random>
    </parameter>
  </parameters>
  
</simulationConfig>
